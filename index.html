<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>yarn-audit-fix</title><meta name="description" content="Documentation for yarn-audit-fix"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">yarn-audit-fix</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>yarn-audit-fix</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><p align="center">
  <a href="https://yarnpkg.com/">
    <img alt="Yarn audit fix" src="https://github.com/antongolub/yarn-audit-fix/blob/master/img/yarn-audit-fix.png?raw=true?raw=true" width="546">
  </a>
</p>

<h1 align="center">
  yarn-audit-fix
</h1>

<p><a href="https://travis-ci.com/antongolub/yarn-audit-fix"><img src="https://travis-ci.com/antongolub/yarn-audit-fix.svg?branch=master" alt="Build Status"></a>
<a href="https://libraries.io/npm/yarn-audit-fix/sourcerank"><img src="https://img.shields.io/librariesio/release/npm/yarn-audit-fix?label=deps" alt="Libraries.io deps status"></a>
<a href="https://codeclimate.com/github/antongolub/yarn-audit-fix/maintainability"><img src="https://api.codeclimate.com/v1/badges/1ace18434c46fe1a47fe/maintainability" alt="Maintainability"></a>
<a href="https://codeclimate.com/github/antongolub/yarn-audit-fix/test_coverage"><img src="https://api.codeclimate.com/v1/badges/1ace18434c46fe1a47fe/test_coverage" alt="Test Coverage"></a>
<a href="https://sonarcloud.io/dashboard?id=antongolub_yarn-audit-fix"><img src="https://sonarcloud.io/api/project_badges/measure?project=antongolub_yarn-audit-fix&metric=alert_status" alt="Sonar"></a>
<a href="https://www.npmjs.com/package/yarn-audit-fix"><img src="https://img.shields.io/npm/dt/yarn-audit-fix" alt="Downloads"></a>
<a href="https://www.npmjs.com/package/yarn-audit-fix"><img src="https://img.shields.io/npm/v/yarn-audit-fix" alt="npm (tag)"></a></p>
<p>Apply <code>npm audit fix</code> logic to <code>yarn.lock</code></p>
<ul>
<li><a href="#digest">Digest</a><ul>
<li><a href="#problem">Problem</a></li>
<li><a href="#solution">Solution</a></li>
<li><a href="#key-features">Key features</a></li>
</ul>
</li>
<li><a href="#getting-started">Getting started</a><ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#cli">CLI</a></li>
<li><a href="#env">ENV</a></li>
<li><a href="#js-api">JS API</a></li>
</ul>
</li>
<li><a href="#migration-notes">Migration notes</a><ul>
<li><a href="#700">^7.0.0</a></li>
<li><a href="#600">^6.0.0</a></li>
<li><a href="#400">^4.0.0</a></li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>

<a href="#digest" id="digest" style="color: inherit; text-decoration: none;">
  <h2>Digest</h2>
</a>

<a href="#problem" id="problem" style="color: inherit; text-decoration: none;">
  <h3>Problem</h3>
</a>
<ol>
<li><code>yarn audit</code> detects vulnerabilities, but cannot fix them.
Authors suggest using <a href="https://dependabot.com/">Depedabot</a> or <a href="https://snyk.io/">Snyk</a> for security patches. Well, it is very inconvenient in some situations, to say the least of it.
The discussion: <a href="https://github.com/yarnpkg/yarn/issues/7075">yarn/issues/7075</a>.</li>
<li><code>yarn audit</code> does not support custom (in-house, internal) registries. Here are the <a href="https://github.com/yarnpkg/yarn/issues/7012">issue</a> &amp; <a href="https://github.com/yarnpkg/yarn/pull/6484">PR</a> which have not yet received the green light.</li>
</ol>

<a href="#solution" id="solution" style="color: inherit; text-decoration: none;">
  <h3>Solution</h3>
</a>
<p>Fortunately, there are several workarounds:</p>
<ol>
<li>Compose <code>npm audit fix</code> with lockfile converter (thanks to <a href="https://github.com/gianpaj">Gianfranco P.</a>, <a href="https://stackoverflow.com/a/60878037">stackoverflow/60878037</a>).
<code>yarn-audit-fix --flow=convert</code> just reproduces these steps with minimal changes. More details: <a href="https://dev.to/antongolub/yarn-audit-fix-workaround-i2a">dev.to/yarn-audit-fix-workaround</a></li>
<li>Fetch <code>yarn/npm audit --json</code> and patch lockfile inners (kudos to <a href="https://github.com/spion">G. Kosev</a>, <a href="https://github.com/hfour/yarn-audit-fix-ng/blob/main/src/index.ts">code reference</a>). <code>yarn-audit-fix --flow=patch</code></li>
</ol>

<a href="#key-features" id="key-features" style="color: inherit; text-decoration: none;">
  <h3>Key features</h3>
</a>
<ul>
<li>A couple of strategies to fix security issues</li>
<li>Mac / Linux / Windows support</li>
<li>CLI / JS API</li>
<li>TS and flow typings</li>
</ul>

<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
  <h2>Getting started</h2>
</a>

<a href="#requirements" id="requirements" style="color: inherit; text-decoration: none;">
  <h3>Requirements</h3>
</a>
<p>Node.js: <code>^12.20.0 || ^14.13.1 || &gt;=16.0.0</code></p>

<a href="#install" id="install" style="color: inherit; text-decoration: none;">
  <h3>Install</h3>
</a>
<pre><code class="language-shell"><span class="hl-0">$ yarn add yarn-audit-fix -D</span>
</code></pre>
<p>or even better</p>
<pre><code><span class="hl-1">npm_config_yes</span><span class="hl-0">=</span><span class="hl-2">true</span><span class="hl-0"> </span><span class="hl-1">npx</span><span class="hl-0"> </span><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span>
</code></pre>

<a href="#cli" id="cli" style="color: inherit; text-decoration: none;">
  <h3>CLI</h3>
</a>
<pre>
$ yarn-audit-fix [--opts]

<b>Preparing temp assets...</b>
<b>Generating package-lock.json from yarn.lock...</b>
<b>Applying npm audit fix...</b>
<b>invoke</b> npm audit fix --package-lock-only
added 14 packages, removed 195 packages and updated 1245 packages in 4.795s
fixed 3 of 26 vulnerabilities in 1370 scanned packages
  23 vulnerabilities required manual review and could not be updated
<b>Updating yarn.lock from package-lock.json...</b>
<b>invoke</b> yarn import
info found npm package-lock.json, converting to yarn.lock
warning synp > request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
warning tslint-config-qiwi > tslint-react@5.0.0: tslint-react is deprecated along with TSLint
warning @qiwi/libdefkit > @types/read-pkg@5.1.0: This is a stub types definition. read-pkg provides its own type definitions, so you do not need this installed.
...
success Saved lockfile.
<b>invoke</b> yarn
[1/4] üîç  Resolving packages...
success Already up-to-date.
<b>Done</b>
</pre>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Default</th>
<th>with <code>--flow=convert</code> only</th>
</tr>
</thead>
<tbody><tr>
<td><code>--flow</code></td>
<td>Define how <code>yarn.lock</code> is modified. <code>convert</code> ‚Äî to compose <code>npm audit fix</code> with two-way lockfile conversion (legacy flow). <code>patch</code> ‚Äî to directly inject audit json data</td>
<td><code>patch</code></td>
<td></td>
</tr>
<tr>
<td><code>--audit-level</code></td>
<td>Include a vulnerability with a level as defined or higher. Supported values: low, moderate, high, critical</td>
<td><code>low</code></td>
<td></td>
</tr>
<tr>
<td><code>--cwd</code></td>
<td>Current working dir</td>
<td><code>process.cwd()</code></td>
<td></td>
</tr>
<tr>
<td><code>--dry-run</code></td>
<td>Get an idea of what audit fix will do</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>--force</code></td>
<td>Have audit fix install semver-major updates to toplevel dependencies, not just semver-compatible ones</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td><code>--help/-h</code></td>
<td>Print help message</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>--legacy-peer-deps</code></td>
<td>Accept an incorrect (potentially broken) deps resolution</td>
<td></td>
<td>‚úî</td>
</tr>
<tr>
<td><code>--loglevel</code></td>
<td>Set custom <a href="https://docs.npmjs.com/cli/v7/using-npm/config#loglevel">log level</a></td>
<td></td>
<td>‚úî</td>
</tr>
<tr>
<td><code>--npm-path</code></td>
<td>Switch to project&#39;s local <strong>npm</strong> version instead of system default. Or provide a custom path. <code>system / local / &lt;custom path&gt;</code></td>
<td><code>system</code></td>
<td></td>
</tr>
<tr>
<td><code>--only</code></td>
<td>Set package <a href="https://docs.npmjs.com/cli/v7/using-npm/config#only">update scope</a>: <code>dev</code>/<code>prod</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>--package-lock-only</code></td>
<td>Run audit fix without modifying <code>node_modules</code>. Highly recommended to <strong>enable</strong>.</td>
<td><code>true</code></td>
<td>‚úî</td>
</tr>
<tr>
<td><code>--registry</code></td>
<td>Custom registry url</td>
<td></td>
<td>‚úî</td>
</tr>
<tr>
<td><code>--silent</code></td>
<td>Disable log output</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td><code>--symlink</code></td>
<td>Symlink type for <code>node_modules</code> ref</td>
<td><code>junction</code> for Windows, <code>dir</code> otherwise</td>
<td></td>
</tr>
<tr>
<td><code>--temp</code></td>
<td>Directory for temporary assets</td>
<td><code>&lt;cwd&gt;/node_modules/.cache/yarn-audit-fix</code></td>
<td></td>
</tr>
<tr>
<td><code>--verbose</code></td>
<td>Switch log level to verbose/debug</td>
<td><code>false</code></td>
<td></td>
</tr>
</tbody></table>

<a href="#env" id="env" style="color: inherit; text-decoration: none;">
  <h3>ENV</h3>
</a>
<p>All mentioned above CLI options can be replaced with the corresponding env variables with leading <strong>YAF</strong> prefix. For example:</p>
<ul>
<li><code>YAF_FORCE</code> equals <code>--force</code></li>
<li><code>YAF_ONLY=prod</code> ‚Äî <code>--only=prod</code></li>
</ul>

<a href="#js-api" id="js-api" style="color: inherit; text-decoration: none;">
  <h3>JS API</h3>
</a>
<p><strong>yarn-audit-fix</strong> is a naive and optimistic workaround, so it exposes all of its inners to give anybody a chance to tweak up and find a better steps combination.
Typedoc: <a href="https://antongolub.github.io/yarn-audit-fix/modules/">https://antongolub.github.io/yarn-audit-fix/modules/</a></p>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-0"> { </span><span class="hl-1">run</span><span class="hl-0">, </span><span class="hl-1">runSync</span><span class="hl-0"> } </span><span class="hl-3">from</span><span class="hl-0"> </span><span class="hl-4">&#39;yarn-audit-fix&#39;</span><br/><br/><span class="hl-5">// NOTE actually it&#39;s promisified `run.sync`</span><br/><span class="hl-3">await</span><span class="hl-0"> </span><span class="hl-6">run</span><span class="hl-0">({</span><br/><span class="hl-0">   </span><span class="hl-1">flow:</span><span class="hl-0"> </span><span class="hl-4">&#39;patch&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-1">verbose:</span><span class="hl-0"> </span><span class="hl-2">true</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-5">// `runSync` is an alias for `run.sync`</span><br/><span class="hl-3">await</span><span class="hl-0"> </span><span class="hl-6">runSync</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-1">flow:</span><span class="hl-0"> </span><span class="hl-4">&#39;patch&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">verbose:</span><span class="hl-0"> </span><span class="hl-2">true</span><br/><span class="hl-0">})</span>
</code></pre>
<p>Build and run custom flows.</p>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-0"> {</span><br/><span class="hl-0">   </span><span class="hl-1">clear</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-1">exit</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-1">patchLockfile</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-1">yarnInstall</span><br/><span class="hl-0">} </span><span class="hl-3">from</span><span class="hl-0"> </span><span class="hl-4">&#39;yarn-audit-fix&#39;</span><br/><br/><span class="hl-3">export</span><span class="hl-0"> </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-7">flow</span><span class="hl-0">: </span><span class="hl-8">TFlow</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-1">main:</span><span class="hl-0"> [</span><br/><span class="hl-0">    [</span><br/><span class="hl-0">      </span><span class="hl-4">&#39;Patching yarn.lock with audit data...&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-1">patchLockfile</span><span class="hl-0">,</span><br/><span class="hl-0">      (...</span><span class="hl-1">args</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><span class="hl-1">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-4">&#39;Smth interesting:&#39;</span><span class="hl-0">, ...</span><span class="hl-1">args</span><span class="hl-0">)},</span><br/><span class="hl-0">      </span><span class="hl-1">yarnInstall</span><span class="hl-0">,</span><br/><span class="hl-0">    ],</span><br/><span class="hl-0">    [</span><span class="hl-4">&#39;Done&#39;</span><span class="hl-0">],</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  </span><span class="hl-1">fallback:</span><span class="hl-0"> [[</span><span class="hl-4">&#39;Failure!&#39;</span><span class="hl-0">, </span><span class="hl-1">exit</span><span class="hl-0">]],</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-3">await</span><span class="hl-0"> </span><span class="hl-6">run</span><span class="hl-0">({}, </span><span class="hl-1">flow</span><span class="hl-0">)</span>
</code></pre>

<a href="#migration-notes" id="migration-notes" style="color: inherit; text-decoration: none;">
  <h2>Migration notes</h2>
</a>

<a href="#800" id="800" style="color: inherit; text-decoration: none;">
  <h3>^8.0.0</h3>
</a>
<p>From v8 the library does not contain <strong>npm</strong> dependency, so the system default is used instead. If necessary you can:</p>
<ul>
<li>Install the required npm version and provide a custom path via <a href="#cli">CLI</a> / <a href="#env">ENV</a> / <a href="#js-api">JS API</a></li>
<li>Use a pinch of <strong>npx</strong> magic: <code>npm_config_yes=true YAF_NPM_PATH=local npx -p yarn-audit-fix -p npm@8 -c yarn-audit-fix</code></li>
</ul>

<a href="#700" id="700" style="color: inherit; text-decoration: none;">
  <h3>^7.0.0</h3>
</a>
<p>Following the deps, converted to ESM. So legacy <code>require</code> API has been dropped since v7.0.0. Use the shiny new <code>import</code> instead or try your luck with <a href="https://www.npmjs.com/package/@qiwi/esm">esm-hook</a>. CLI works as before.</p>
<pre><code class="language-js"><span class="hl-5">// const {run} = require(&#39;yarn-audit-fix&#39;) turns into</span><br/><span class="hl-3">import</span><span class="hl-0"> {</span><span class="hl-1">run</span><span class="hl-0">} </span><span class="hl-3">from</span><span class="hl-0"> </span><span class="hl-4">&#39;yarn-audit-fix&#39;</span>
</code></pre>

<a href="#600" id="600" style="color: inherit; text-decoration: none;">
  <h3>^6.0.0</h3>
</a>
<p>Default fix strategy <a href="https://github.com/antongolub/yarn-audit-fix/releases/tag/v6.0.0">has been changed</a> to direct lockfile patching with <code>yarn audit --json</code> data. To use the previous <em>legacy</em> flow, pass <code>--flow=convert</code> option to CLI.</p>

<a href="#400" id="400" style="color: inherit; text-decoration: none;">
  <h3>^4.0.0</h3>
</a>
<p><code>--npm-v7</code> flag is redundant. From v4.0.0 package&#39;s own version of <strong>npm</strong> is used by default. But you&#39;re still able to invoke system default with <code>--npm-path=system</code> or define any custom <code>--npm-path=/another/npm/bin</code>.</p>

<a href="#troubleshooting" id="troubleshooting" style="color: inherit; text-decoration: none;">
  <h2>Troubleshooting</h2>
</a>

<a href="#yarn-audit-fix-version-xxx-is-out-of-date" id="yarn-audit-fix-version-xxx-is-out-of-date" style="color: inherit; text-decoration: none;">
  <h3>yarn-audit-fix version x.x.x is out of date</h3>
</a>
<pre><code><span class="hl-1">npm_config_yes</span><span class="hl-0">=</span><span class="hl-2">true</span><span class="hl-0"> </span><span class="hl-1">npx</span><span class="hl-0"> </span><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span><span class="hl-0"> --</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">level</span><span class="hl-0">=</span><span class="hl-1">moderate</span><br/><span class="hl-1">Runtime</span><span class="hl-0"> </span><span class="hl-1">digest</span><br/><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span><span class="hl-0"> </span><span class="hl-1">version</span><span class="hl-0"> </span><span class="hl-9">4.3</span><span class="hl-0">.</span><span class="hl-9">6</span><span class="hl-0"> </span><span class="hl-1">is</span><span class="hl-0"> </span><span class="hl-1">out</span><span class="hl-0"> </span><span class="hl-2">of</span><span class="hl-0"> </span><span class="hl-1">date</span><span class="hl-0">. </span><span class="hl-1">Install</span><span class="hl-0"> </span><span class="hl-1">the</span><span class="hl-0"> </span><span class="hl-1">latest</span><span class="hl-0"> </span><span class="hl-9">6.0</span><span class="hl-0">.</span><span class="hl-9">0</span><span class="hl-0"> </span><span class="hl-1">for</span><span class="hl-0"> </span><span class="hl-1">better</span><span class="hl-0"> </span><span class="hl-1">results</span>
</code></pre>
<p><strong>npx</strong> caches previously loaded packages, so you need one of:</p>
<ol>
<li>Define version to load: <code>npm yarn-audit-fix@6.0.0</code></li>
<li>Reset npx cache. For Mac/Linux: <code>rm -rf ~/.npm/_npx</code></li>
</ol>

<a href="#yarn-audit-fix-command-not-found" id="yarn-audit-fix-command-not-found" style="color: inherit; text-decoration: none;">
  <h3>yarn-audit-fix command not found</h3>
</a>
<p>After installation, the package may not be found. This is probably an issue with $PATH finding <code>node_modules/.bin</code> contents or smth like that (<a href="https://github.com/npm/npm/issues/957">npm/issues/957</a>).
A bit annoying, but it&#39;s easy to handle in several ways.</p>
<ul>
<li>You&#39;re able to run the cmd through <strong>yarn</strong>: <code>yarn yarn-audit-fix</code>.</li>
<li>Simply invoke <code>node_modules/.bin/yarn-audit-fix</code> script.</li>
</ul>

<a href="#enoent-no-such-file-or-directory" id="enoent-no-such-file-or-directory" style="color: inherit; text-decoration: none;">
  <h3>enoent: no such file or directory</h3>
</a>
<p>In some cases <strong>npm audit fix</strong> makes <code>node_modules</code> to become inconsistent. This is expected. <strong>yarn</strong> and <strong>npm</strong> organize the directory space slightly differently.</p>
<pre><code><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">WARN</span><span class="hl-0"> </span><span class="hl-1">rm</span><span class="hl-0"> </span><span class="hl-1">not</span><span class="hl-0"> </span><span class="hl-1">removing</span><span class="hl-0"> /</span><span class="hl-1">Users</span><span class="hl-0">/</span><span class="hl-1">antongolub</span><span class="hl-0">/</span><span class="hl-1">projects</span><span class="hl-0">/</span><span class="hl-1">queuefy</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/.</span><span class="hl-1">cache</span><span class="hl-0">/</span><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/</span><span class="hl-1">npm</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/.</span><span class="hl-1">bin</span><span class="hl-0">/</span><span class="hl-1">node</span><span class="hl-0">-</span><span class="hl-1">gyp</span><span class="hl-0"> </span><span class="hl-3">as</span><span class="hl-0"> </span><span class="hl-8">it</span><span class="hl-0"> </span><span class="hl-8">wasn</span><span class="hl-4">&#39;t installed by /Users/antongolub/projects/queuefy/node_modules/.cache/yarn-audit-fix/node_modules/npm/node_modules/node-gy</span><span class="hl-10">p</span><br/><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">WARN</span><span class="hl-0"> </span><span class="hl-1">rm</span><span class="hl-0"> </span><span class="hl-1">not</span><span class="hl-0"> </span><span class="hl-1">removing</span><span class="hl-0"> /</span><span class="hl-1">Users</span><span class="hl-0">/</span><span class="hl-1">antongolub</span><span class="hl-0">/</span><span class="hl-1">projects</span><span class="hl-0">/</span><span class="hl-1">queuefy</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/.</span><span class="hl-1">cache</span><span class="hl-0">/</span><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/</span><span class="hl-1">npm</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/.</span><span class="hl-1">bin</span><span class="hl-0">/</span><span class="hl-1">uuid</span><span class="hl-0"> </span><span class="hl-3">as</span><span class="hl-0"> </span><span class="hl-8">it</span><span class="hl-0"> </span><span class="hl-8">wasn</span><span class="hl-4">&#39;t installed by /Users/antongolub/projects/queuefy/node_modules/.cache/yarn-audit-fix/node_modules/npm/node_modules/uui</span><span class="hl-10">d</span><br/><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">ERR</span><span class="hl-0">! </span><span class="hl-1">code</span><span class="hl-0"> </span><span class="hl-7">ENOENT</span><br/><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">ERR</span><span class="hl-0">! </span><span class="hl-1">syscall</span><span class="hl-0"> </span><span class="hl-1">chmod</span><br/><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">ERR</span><span class="hl-0">! </span><span class="hl-1">path</span><span class="hl-0"> /</span><span class="hl-1">Users</span><span class="hl-0">/</span><span class="hl-1">antongolub</span><span class="hl-0">/</span><span class="hl-1">projects</span><span class="hl-0">/</span><span class="hl-1">queuefy</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/.</span><span class="hl-1">cache</span><span class="hl-0">/</span><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/@</span><span class="hl-1">qiwi</span><span class="hl-0">/</span><span class="hl-1">libdefkit</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/</span><span class="hl-1">flowgen</span><span class="hl-0">/</span><span class="hl-1">lib</span><span class="hl-0">/</span><span class="hl-1">cli</span><span class="hl-0">/</span><span class="hl-1">index</span><span class="hl-0">.</span><span class="hl-1">js</span><br/><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">ERR</span><span class="hl-0">! </span><span class="hl-1">errno</span><span class="hl-0"> -</span><span class="hl-9">2</span><br/><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">ERR</span><span class="hl-0">! </span><span class="hl-1">enoent</span><span class="hl-0"> </span><span class="hl-11">ENOENT</span><span class="hl-0">: </span><span class="hl-1">no</span><span class="hl-0"> </span><span class="hl-1">such</span><span class="hl-0"> </span><span class="hl-1">file</span><span class="hl-0"> </span><span class="hl-1">or</span><span class="hl-0"> </span><span class="hl-1">directory</span><span class="hl-0">, </span><span class="hl-1">chmod</span><span class="hl-0"> </span><span class="hl-4">&#39;/Users/antongolub/projects/queuefy/node_modules/.cache/yarn-audit-fix/node_modules/@qiwi/libdefkit/node_modules/flowgen/lib/cli/index.js&#39;</span><br/><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">ERR</span><span class="hl-0">! </span><span class="hl-1">enoent</span><span class="hl-0"> </span><span class="hl-1">This</span><span class="hl-0"> </span><span class="hl-1">is</span><span class="hl-0"> </span><span class="hl-1">related</span><span class="hl-0"> </span><span class="hl-1">to</span><span class="hl-0"> </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-1">not</span><span class="hl-0"> </span><span class="hl-1">being</span><span class="hl-0"> </span><span class="hl-1">able</span><span class="hl-0"> </span><span class="hl-1">to</span><span class="hl-0"> </span><span class="hl-1">find</span><span class="hl-0"> </span><span class="hl-1">a</span><span class="hl-0"> </span><span class="hl-1">file</span><span class="hl-0">.</span><br/><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">ERR</span><span class="hl-0">! </span><span class="hl-1">enoent</span><span class="hl-0"> </span><br/><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">ERR</span><span class="hl-0">!     /</span><span class="hl-1">Users</span><span class="hl-0">/</span><span class="hl-1">antongolub</span><span class="hl-0">/.</span><span class="hl-1">npm</span><span class="hl-0">/</span><span class="hl-1">_logs</span><span class="hl-0">/</span><span class="hl-9">2020</span><span class="hl-0">-</span><span class="hl-9">08</span><span class="hl-0">-23</span><span class="hl-7">T07_09_26_924Z</span><span class="hl-0">-</span><span class="hl-1">debug</span><span class="hl-0">.</span><span class="hl-1">log</span><br/><span class="hl-0">{</span><br/><span class="hl-0">  </span><span class="hl-11">status</span><span class="hl-0">: </span><span class="hl-9">254</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-11">signal</span><span class="hl-0">: </span><span class="hl-2">null</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-11">output</span><span class="hl-0">: [ </span><span class="hl-2">null</span><span class="hl-0">, </span><span class="hl-2">null</span><span class="hl-0">, </span><span class="hl-2">null</span><span class="hl-0"> ]</span>
</code></pre>
<p>Let&#39;s try this workaround:</p>
<ol>
<li>Restore the original <code>node_modules</code> state. <code>yarn --force</code> or <code>rm-rf node_modules &amp;&amp; yarn</code>.</li>
<li>Apply <code>npx yarn-audit-fix --package-lock-only</code>. The last param should instruct <strong>npm</strong> not to modify <code>node_modules</code> contents.</li>
</ol>

<a href="#--force-did-not-force-the-update" id="--force-did-not-force-the-update" style="color: inherit; text-decoration: none;">
  <h3>--force did not force the update</h3>
</a>
<p>The problem only concerns repositories with <code>workspaces</code> (monorepos). 
<code>npm audit fix --force</code> throws 1 status code and suggests running <code>npm audit fix --force</code>. This quite ironic behaviour is exactly what <strong>npm</strong> (arborist) <a href="https://github.com/npm/arborist/blob/5b550501f50d6489d7e5f7598a97a5cf4cc5cc8a/lib/arborist/build-ideal-tree.js#L373">does now</a>. </p>
<pre><code><span class="hl-1">$$</span><span class="hl-0"> </span><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span><span class="hl-0"> --</span><span class="hl-1">force</span><span class="hl-0">          </span><br/><span class="hl-0"> </span><span class="hl-1">Preparing</span><span class="hl-0"> </span><span class="hl-1">temp</span><span class="hl-0"> </span><span class="hl-1">assets</span><span class="hl-0">...</span><br/><span class="hl-0"> </span><span class="hl-1">Generating</span><span class="hl-0"> </span><span class="hl-3">package</span><span class="hl-0">-</span><span class="hl-1">lock</span><span class="hl-0">.</span><span class="hl-1">json</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-1">yarn</span><span class="hl-0">.</span><span class="hl-1">lock</span><span class="hl-0">...</span><br/><span class="hl-0"> </span><span class="hl-1">Applying</span><span class="hl-0"> </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-1">audit</span><span class="hl-0"> </span><span class="hl-1">fix</span><span class="hl-0">...</span><br/><span class="hl-0"> </span><span class="hl-1">invoke</span><span class="hl-0"> /</span><span class="hl-1">home</span><span class="hl-0">/</span><span class="hl-1">qwelias</span><span class="hl-0">/.</span><span class="hl-1">nvm</span><span class="hl-0">/</span><span class="hl-1">versions</span><span class="hl-0">/</span><span class="hl-1">node</span><span class="hl-0">/</span><span class="hl-1">v12</span><span class="hl-0">.</span><span class="hl-9">18.1</span><span class="hl-0">/</span><span class="hl-1">lib</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/</span><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/.</span><span class="hl-1">bin</span><span class="hl-0">/</span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-1">audit</span><span class="hl-0"> </span><span class="hl-1">fix</span><span class="hl-0"> --</span><span class="hl-3">package</span><span class="hl-0">-</span><span class="hl-1">lock</span><span class="hl-0">-</span><span class="hl-1">only</span><span class="hl-0"> --</span><span class="hl-1">force</span><span class="hl-0"> --</span><span class="hl-1">prefix</span><span class="hl-0">=/</span><span class="hl-1">home</span><span class="hl-0">/</span><span class="hl-1">qwelias</span><span class="hl-0">/</span><span class="hl-1">prj</span><span class="hl-0">/</span><span class="hl-1">stuff</span><span class="hl-0">/</span><span class="hl-1">test</span><span class="hl-0">-</span><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/.</span><span class="hl-1">cache</span><span class="hl-0">/</span><span class="hl-1">yarn</span><span class="hl-0">-</span><span class="hl-1">audit</span><span class="hl-0">-</span><span class="hl-1">fix</span><br/><span class="hl-0"> </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">WARN</span><span class="hl-0"> </span><span class="hl-1">using</span><span class="hl-0"> --</span><span class="hl-1">force</span><span class="hl-0"> </span><span class="hl-1">Recommended</span><span class="hl-0"> </span><span class="hl-1">protections</span><span class="hl-0"> </span><span class="hl-1">disabled</span><span class="hl-0">.</span><br/><span class="hl-0"> </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">WARN</span><span class="hl-0"> </span><span class="hl-1">audit</span><span class="hl-0"> </span><span class="hl-1">Updating</span><span class="hl-0"> </span><span class="hl-1">lodash</span><span class="hl-0"> </span><span class="hl-1">to</span><span class="hl-0"> </span><span class="hl-9">4.17</span><span class="hl-0">.</span><span class="hl-9">20</span><span class="hl-0">,</span><span class="hl-1">which</span><span class="hl-0"> </span><span class="hl-1">is</span><span class="hl-0"> </span><span class="hl-1">outside</span><span class="hl-0"> </span><span class="hl-1">your</span><span class="hl-0"> </span><span class="hl-1">stated</span><span class="hl-0"> </span><span class="hl-1">dependency</span><span class="hl-0"> </span><span class="hl-1">range</span><span class="hl-0">.</span><br/><span class="hl-0"> </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">WARN</span><span class="hl-0"> </span><span class="hl-1">audit</span><span class="hl-0"> </span><span class="hl-1">Manual</span><span class="hl-0"> </span><span class="hl-1">fix</span><span class="hl-0"> </span><span class="hl-1">required</span><span class="hl-0"> </span><span class="hl-2">in</span><span class="hl-0"> </span><span class="hl-1">linked</span><span class="hl-0"> </span><span class="hl-1">project</span><span class="hl-0"> </span><span class="hl-1">at</span><span class="hl-0"> ./</span><span class="hl-1">packages</span><span class="hl-0">/</span><span class="hl-1">bar</span><span class="hl-0"> </span><span class="hl-1">for</span><span class="hl-0"> </span><span class="hl-1">lodash</span><span class="hl-0">@&lt;=</span><span class="hl-9">4.17</span><span class="hl-0">.</span><span class="hl-9">18.</span><br/><span class="hl-0"> </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">WARN</span><span class="hl-0"> </span><span class="hl-1">audit</span><span class="hl-0"> </span><span class="hl-4">&#39;cd ./packages/bar&#39;</span><span class="hl-0"> </span><span class="hl-1">and</span><span class="hl-0"> </span><span class="hl-1">run</span><span class="hl-0"> </span><span class="hl-4">&#39;npm audit&#39;</span><span class="hl-0"> </span><span class="hl-1">for</span><span class="hl-0"> </span><span class="hl-1">details</span><span class="hl-0">.</span><br/><span class="hl-0"> </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">WARN</span><span class="hl-0"> </span><span class="hl-1">audit</span><span class="hl-0"> </span><span class="hl-1">Manual</span><span class="hl-0"> </span><span class="hl-1">fix</span><span class="hl-0"> </span><span class="hl-1">required</span><span class="hl-0"> </span><span class="hl-2">in</span><span class="hl-0"> </span><span class="hl-1">linked</span><span class="hl-0"> </span><span class="hl-1">project</span><span class="hl-0"> </span><span class="hl-1">at</span><span class="hl-0"> ./</span><span class="hl-1">packages</span><span class="hl-0">/</span><span class="hl-1">foo</span><span class="hl-0"> </span><span class="hl-1">for</span><span class="hl-0"> </span><span class="hl-1">lodash</span><span class="hl-0">@&lt;=</span><span class="hl-9">4.17</span><span class="hl-0">.</span><span class="hl-9">18.</span><br/><span class="hl-0"> </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-7">WARN</span><span class="hl-0"> </span><span class="hl-1">audit</span><span class="hl-0"> </span><span class="hl-4">&#39;cd ./packages/foo&#39;</span><span class="hl-0"> </span><span class="hl-1">and</span><span class="hl-0"> </span><span class="hl-1">run</span><span class="hl-0"> </span><span class="hl-4">&#39;npm audit&#39;</span><span class="hl-0"> </span><span class="hl-1">for</span><span class="hl-0"> </span><span class="hl-1">details</span><span class="hl-0">.</span><br/><span class="hl-0"> </span><br/><span class="hl-0"> </span><span class="hl-1">up</span><span class="hl-0"> </span><span class="hl-1">to</span><span class="hl-0"> </span><span class="hl-1">date</span><span class="hl-0">, </span><span class="hl-1">audited</span><span class="hl-0"> </span><span class="hl-9">7</span><span class="hl-0"> </span><span class="hl-1">packages</span><span class="hl-0"> </span><span class="hl-2">in</span><span class="hl-0"> 2</span><span class="hl-1">s</span><br/><span class="hl-0"> </span><br/><span class="hl-0"> # </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-1">audit</span><span class="hl-0"> </span><span class="hl-1">report</span><br/><span class="hl-0"> </span><br/><span class="hl-0"> </span><span class="hl-1">lodash</span><span class="hl-0">  &lt;=</span><span class="hl-9">4.17</span><span class="hl-0">.</span><span class="hl-9">18</span><br/><span class="hl-0"> </span><span class="hl-11">Severity</span><span class="hl-0">: </span><span class="hl-1">high</span><br/><span class="hl-0"> </span><span class="hl-1">Prototype</span><span class="hl-0"> </span><span class="hl-1">Pollution</span><span class="hl-0"> - </span><span class="hl-11">https</span><span class="hl-0">:</span><span class="hl-5">//npmjs.com/advisories/782</span><br/><span class="hl-0"> </span><span class="hl-1">Prototype</span><span class="hl-0"> </span><span class="hl-1">Pollution</span><span class="hl-0"> - </span><span class="hl-11">https</span><span class="hl-0">:</span><span class="hl-5">//npmjs.com/advisories/1065</span><br/><span class="hl-0"> </span><span class="hl-1">fix</span><span class="hl-0"> </span><span class="hl-1">available</span><span class="hl-0"> </span><span class="hl-1">via</span><span class="hl-0"> </span><span class="hl-4">`npm audit fix --force`</span><br/><span class="hl-0"> </span><span class="hl-1">Will</span><span class="hl-0"> </span><span class="hl-1">install</span><span class="hl-0"> </span><span class="hl-1">lodash</span><span class="hl-0">@</span><span class="hl-9">4.17</span><span class="hl-0">.</span><span class="hl-9">20</span><span class="hl-0">, </span><span class="hl-1">which</span><span class="hl-0"> </span><span class="hl-1">is</span><span class="hl-0"> </span><span class="hl-1">outside</span><span class="hl-0"> </span><span class="hl-1">the</span><span class="hl-0"> </span><span class="hl-1">stated</span><span class="hl-0"> </span><span class="hl-1">dependency</span><span class="hl-0"> </span><span class="hl-1">range</span><br/><span class="hl-0"> </span><span class="hl-1">packages</span><span class="hl-0">/</span><span class="hl-1">bar</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/</span><span class="hl-1">lodash</span><br/><span class="hl-0"> </span><span class="hl-1">packages</span><span class="hl-0">/</span><span class="hl-1">foo</span><span class="hl-0">/</span><span class="hl-1">node_modules</span><span class="hl-0">/</span><span class="hl-1">lodash</span><br/><span class="hl-0"> </span><br/><span class="hl-0"> </span><span class="hl-9">1</span><span class="hl-0"> </span><span class="hl-1">high</span><span class="hl-0"> </span><span class="hl-1">severity</span><span class="hl-0"> </span><span class="hl-1">vulnerability</span><br/><span class="hl-0"> </span><br/><span class="hl-0"> </span><span class="hl-1">To</span><span class="hl-0"> </span><span class="hl-1">address</span><span class="hl-0"> </span><span class="hl-1">all</span><span class="hl-0"> </span><span class="hl-1">issues</span><span class="hl-0">, </span><span class="hl-11">run</span><span class="hl-0">:</span><br/><span class="hl-0">   </span><span class="hl-1">npm</span><span class="hl-0"> </span><span class="hl-1">audit</span><span class="hl-0"> </span><span class="hl-1">fix</span><span class="hl-0"> --</span><span class="hl-1">force</span><br/><span class="hl-0"> {</span><br/><span class="hl-0">   </span><span class="hl-11">status</span><span class="hl-0">: </span><span class="hl-9">1</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-11">signal</span><span class="hl-0">: </span><span class="hl-2">null</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-11">output</span><span class="hl-0">: [ </span><span class="hl-2">null</span><span class="hl-0">, </span><span class="hl-2">null</span><span class="hl-0">, </span><span class="hl-2">null</span><span class="hl-0"> ],</span><br/><span class="hl-0">   </span><span class="hl-11">pid</span><span class="hl-0">: </span><span class="hl-9">176019</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-11">stdout</span><span class="hl-0">: </span><span class="hl-2">null</span><span class="hl-0">,</span><br/><span class="hl-0">   </span><span class="hl-11">stderr</span><span class="hl-0">: </span><span class="hl-2">null</span><br/><span class="hl-0"> }</span>
</code></pre>
<p>So you need, as the message says, to manually change the dependency versions. <strong>npm@7</strong> <del>is still in beta</del>, perhaps this logic will be changed later.
In some cases <strong>npm@6</strong> works better, so if you have such a version installed on your system, you may try:</p>
<pre><code class="language-shell"><span class="hl-0">npx yarn-audit-fix --npm-path=system --flow=convert</span>
</code></pre>
<p>You may also try to cast <em>the optimistic flags combo</em></p>
<pre><code class="language-shell"><span class="hl-0">npx yarn-audit-fix --package-lock-only=false --force --legacy-peer-deps --flow=convert</span>
</code></pre>
<p>Unfortunately, even this invocation may return something like:</p>
<pre><code class="language-shell"><span class="hl-5"># npm audit report</span><br/><br/><span class="hl-0">hosted-git-info  &lt;3.0.8</span><br/><span class="hl-0">Severity: moderate</span><br/><span class="hl-0">Regular Expression Deinal of Service - https://npmjs.com/advisories/1677</span><br/><span class="hl-0">No fix available</span><br/><span class="hl-0">node_modules/normalize-package-data/node_modules/hosted-git-info</span><br/><span class="hl-0">  normalize-package-data  2.0.0 - 2.5.0</span><br/><span class="hl-0">  Depends on vulnerable versions of hosted-git-info</span><br/><span class="hl-0">  node_modules/normalize-package-data</span><br/><span class="hl-0">    meow  3.4.0 - 9.0.0</span><br/><span class="hl-0">    Depends on vulnerable versions of normalize-package-data</span><br/><span class="hl-0">    Depends on vulnerable versions of read-pkg-up</span>
</code></pre>
<p><strong>No fix available</strong> just means that no fix available. If you still doubt the correctness of the output, you can check it by hand.</p>
<pre><code class="language-shell"><span class="hl-0">npm i --package-lock-only</span><br/><span class="hl-0">npm audit fix --package-lock-only --force</span>
</code></pre>
<p>Same response for alternative patching flow:</p>
<pre><code class="language-shell"><span class="hl-0">npm_config_yes=true npx yarn-audit-fix --audit-level=moderate --flow=patch</span>
</code></pre>
<pre><code class="language-shell"><span class="hl-0">Patching yarn.lock with audit data...</span><br/><span class="hl-0">invoke yarn audit --json --level moderate</span><br/><span class="hl-0">Can</span><span class="hl-4">&#39;t find patched version that satisfies postcss@^7.0.0 in &gt;=8.2.10</span><br/><span class="hl-4">Can&#39;</span><span class="hl-0">t find patched version that satisfies postcss@^7.0.1 </span><span class="hl-3">in</span><span class="hl-0"> &gt;=8.2.10</span><br/><span class="hl-0">Can</span><span class="hl-4">&#39;t find patched version that satisfies postcss@^7.0.27 in &gt;=8.2.10</span><br/><span class="hl-4">Can&#39;</span><span class="hl-0">t find patched version that satisfies ws@^7.2.3 </span><span class="hl-3">in</span><span class="hl-0"> &gt;=6.2.2 &lt;7.0.0 || &gt;=7.4.6</span><br/><span class="hl-0">Upgraded deps: &lt;none&gt;</span><br/><span class="hl-0">invoke yarn --update-checksums</span>
</code></pre>
<p>Not everything can be repaired, alack.</p>

<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
  <h2>Contributing</h2>
</a>
<p>Feel free to open any issues: bugs, feature requests or other questions.
You&#39;re always welcome to suggest a PR. Just fork this repo, write some code, add some tests and push your changes.
Any feedback is appreciated.</p>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>License</h2>
</a>
<p><a href="./LICENSE">MIT</a></p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/run.html">run</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#ICallable" class="tsd-kind-icon">ICallable</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TAuditAdvisory" class="tsd-kind-icon">TAudit<wbr/>Advisory</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TAuditEntry" class="tsd-kind-icon">TAudit<wbr/>Entry</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TAuditReport" class="tsd-kind-icon">TAudit<wbr/>Report</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TCallback" class="tsd-kind-icon">TCallback</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TContext" class="tsd-kind-icon">TContext</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TFlags" class="tsd-kind-icon">TFlags</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TFlagsMapping" class="tsd-kind-icon">TFlags<wbr/>Mapping</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TFlow" class="tsd-kind-icon">TFlow</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TLockfileObject" class="tsd-kind-icon">TLockfile<wbr/>Object</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TStage" class="tsd-kind-icon">TStage</a></li><li class="tsd-kind-variable"><a href="modules.html#_internal" class="tsd-kind-icon">_internal</a></li><li class="tsd-kind-variable"><a href="modules.html#run" class="tsd-kind-icon">run</a></li><li class="tsd-kind-function"><a href="modules.html#_audit" class="tsd-kind-icon">_audit</a></li><li class="tsd-kind-function"><a href="modules.html#_parseAuditJsonReport" class="tsd-kind-icon">_parse<wbr/>Audit<wbr/>Json<wbr/>Report</a></li><li class="tsd-kind-function"><a href="modules.html#_patch" class="tsd-kind-icon">_patch</a></li><li class="tsd-kind-function"><a href="modules.html#_read" class="tsd-kind-icon">_read</a></li><li class="tsd-kind-function"><a href="modules.html#_write" class="tsd-kind-icon">_write</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#attempt" class="tsd-kind-icon">attempt</a></li><li class="tsd-kind-function"><a href="modules.html#audit" class="tsd-kind-icon">audit</a></li><li class="tsd-kind-function"><a href="modules.html#clear" class="tsd-kind-icon">clear</a></li><li class="tsd-kind-function"><a href="modules.html#createSymlinks" class="tsd-kind-icon">create<wbr/>Symlinks</a></li><li class="tsd-kind-function"><a href="modules.html#createTempAssets" class="tsd-kind-icon">create<wbr/>Temp<wbr/>Assets</a></li><li class="tsd-kind-function"><a href="modules.html#ensureDir" class="tsd-kind-icon">ensure<wbr/>Dir</a></li><li class="tsd-kind-function"><a href="modules.html#exec" class="tsd-kind-icon">exec</a></li><li class="tsd-kind-function"><a href="modules.html#exit" class="tsd-kind-icon">exit</a></li><li class="tsd-kind-function"><a href="modules.html#formatFlags" class="tsd-kind-icon">format<wbr/>Flags</a></li><li class="tsd-kind-function"><a href="modules.html#getClosestBin" class="tsd-kind-icon">get<wbr/>Closest<wbr/>Bin</a></li><li class="tsd-kind-function"><a href="modules.html#getContext" class="tsd-kind-icon">get<wbr/>Context</a></li><li class="tsd-kind-function"><a href="modules.html#getFlow" class="tsd-kind-icon">get<wbr/>Flow</a></li><li class="tsd-kind-function"><a href="modules.html#getNpm" class="tsd-kind-icon">get<wbr/>Npm</a></li><li class="tsd-kind-function"><a href="modules.html#getSymlinkType" class="tsd-kind-icon">get<wbr/>Symlink<wbr/>Type</a></li><li class="tsd-kind-function"><a href="modules.html#getTemp" class="tsd-kind-icon">get<wbr/>Temp</a></li><li class="tsd-kind-function"><a href="modules.html#getWorkspaces" class="tsd-kind-icon">get<wbr/>Workspaces</a></li><li class="tsd-kind-function"><a href="modules.html#getYarn" class="tsd-kind-icon">get<wbr/>Yarn</a></li><li class="tsd-kind-function"><a href="modules.html#invoke" class="tsd-kind-icon">invoke</a></li><li class="tsd-kind-function"><a href="modules.html#isWindows" class="tsd-kind-icon">is<wbr/>Windows</a></li><li class="tsd-kind-function"><a href="modules.html#mapFlags" class="tsd-kind-icon">map<wbr/>Flags</a></li><li class="tsd-kind-function"><a href="modules.html#normalizeFlags" class="tsd-kind-icon">normalize<wbr/>Flags</a></li><li class="tsd-kind-function"><a href="modules.html#npmAuditFix" class="tsd-kind-icon">npm<wbr/>Audit<wbr/>Fix</a></li><li class="tsd-kind-function"><a href="modules.html#parseAuditJsonReport" class="tsd-kind-icon">parse<wbr/>Audit<wbr/>Json<wbr/>Report</a></li><li class="tsd-kind-function"><a href="modules.html#patch" class="tsd-kind-icon">patch</a></li><li class="tsd-kind-function"><a href="modules.html#patchLockfile" class="tsd-kind-icon">patch<wbr/>Lockfile</a></li><li class="tsd-kind-function"><a href="modules.html#pkgDir" class="tsd-kind-icon">pkg<wbr/>Dir</a></li><li class="tsd-kind-function"><a href="modules.html#printRuntimeDigest" class="tsd-kind-icon">print<wbr/>Runtime<wbr/>Digest</a></li><li class="tsd-kind-function"><a href="modules.html#read" class="tsd-kind-icon">read</a></li><li class="tsd-kind-function"><a href="modules.html#readJson" class="tsd-kind-icon">read<wbr/>Json</a></li><li class="tsd-kind-function"><a href="modules.html#runSync" class="tsd-kind-icon">run<wbr/>Sync</a></li><li class="tsd-kind-function"><a href="modules.html#syncLockfile" class="tsd-kind-icon">sync<wbr/>Lockfile</a></li><li class="tsd-kind-function"><a href="modules.html#verify" class="tsd-kind-icon">verify</a></li><li class="tsd-kind-function"><a href="modules.html#write" class="tsd-kind-icon">write</a></li><li class="tsd-kind-function"><a href="modules.html#yarnImport" class="tsd-kind-icon">yarn<wbr/>Import</a></li><li class="tsd-kind-function"><a href="modules.html#yarnInstall" class="tsd-kind-icon">yarn<wbr/>Install</a></li><li class="tsd-kind-function"><a href="modules.html#yarnLockToPkgLock" class="tsd-kind-icon">yarn<wbr/>Lock<wbr/>To<wbr/>Pkg<wbr/>Lock</a></li></ul></nav></div></div></div><footer class=""><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="overlay"></div><script src="assets/main.js"></script></body></html>